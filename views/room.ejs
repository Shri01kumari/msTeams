<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,  user-scalable=yes, initial-scale=1, maximum-scale=1"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta id="theme-color" name="theme-color" content="#ffffff" />
    <meta
      itemprop="description"
      content="Teams app made for microsoft engage"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/assets/icons8-microsoft-teams-2019-16.png"
    />
    <!-- <base target="_blank" /> -->
    <title>Teams</title>
    <script>
      const ROOM_ID = "<%= roomId %>";
    </script>

    <!-- imported scripts and styles -->
    <link
      href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700"
      rel="stylesheet"
      type="text/css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />

    <script
      defer
      src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script src="/socket.io/socket.io.js" defer></script>
    <script src="https://kit.fontawesome.com/c939d0e917.js"></script>
    <!-- end -->
    <script crossorigin src="https://unpkg.com/@daily-co/daily-js"></script>

    <script src="/js/script.js" defer></script>
    <link rel="stylesheet" href="/css/meet.css" />
    <link rel="stylesheet" href="/css/evo-calendar.min.css" />
    <link rel="stylesheet" href="/css/evo-calendar.midnight-blue.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;700&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <div class="main">
      <div class="main__left">
        <div class="main__videos">
          <div id="video-grid"></div>
        </div>
        <div class="main__controls">
          <div class="main__controls__block">
            <div
              onclick="muteUnmute()"
              class="main__controls__button main__mute_button"
            >
              <i class="fas fa-microphone"></i>
              <span>Mute</span>
            </div>
            <div
              onclick="playStop()"
              class="main__controls__button main__video_button"
            >
              <i class="fas fa-video"></i>
              <span>Stop Video</span>
            </div>
          </div>

          <div class="main__controls__block">
            <div class="main__controls__button">
              <i class="fas fa-shield-alt"></i>
              <span>Security</span>
            </div>
            <div class="main__controls__button">
              <i class="fas fa-user-friends"></i>
              <span>Participants</span>
            </div>
            <div class="main__controls__button">
              <i class="fas fa-comment-alt"></i>
              <span>Chat</span>
            </div>
          </div>

          <!-- dropup menu -->
          <div onclick="closeDropup()" class="dropup-alpha">
            <button class="dropbtn">
              <i class="icon-ellipsis-vertical"> ‚Åû </i>
            </button>
            <div id="close-menu" class="dropup-alpha-content">
              <a href="#">Link 1</a>
              <a href="#">Link 2</a>
              <a href="#">Link 3</a>
            </div>
          </div>
          <!--end -->

          <div class="main__controls__block">
            <div class="main__controls__button">
              <!-- Todo: make a homepage and redirect leave meeting to homepage onclick -->
              <!-- Task completed -->
              <!-- todo: change ui of leave meeting -->
              <!-- done -->
              <a href="/" class="leave_meeting">Leave Meeting </a>
            </div>
          </div>
        </div>
      </div>
      <div class="main__right">
        <div class="main__header">
          <h6>Chat</h6>
        </div>
        <div class="main__chat_window">
          <ul class="messages"></ul>
        </div>
        <div class="main__message_container">
          <input
            id="chat_message"
            type="text"
            placeholder="Type message here..."
          />
        </div>
      </div>
    </div>
    <div id="container">
      <h1>Record Stream</h1>
      <video id="gum" playsinline autoplay muted></video>
      <video id="recorded" playsinline></video>

      <div>
        <button id="start">Start camera</button>
        <button id="record" disabled>Start Recording</button>
        <button id="play" disabled>Play</button>
        <button id="download" disabled>Download</button>
      </div>

      <div>
        Recording format:
        <select id="codecPreferences" disabled></select>
      </div>
      <div>
        <h4>Media Stream Constraints options</h4>
        <p>
          Echo cancellation: <input type="checkbox" id="echoCancellation" />
        </p>
      </div>

      <div>
        <span id="errorMsg"></span>
      </div>
    </div>

    <!-- <div id="container2">
      <h1>Transfer file</h1>

      <section>
        <div>
          <form id="fileInfo">
            <input type="file" id="fileInput" name="files" />
          </form>
          <button disabled id="sendFile">Send</button>
          <button disabled id="abortButton">Abort</button>
        </div>
        <div class="progress">
          <div class="label">Send progress:</div>
          <progress id="sendProgress" max="0" value="0"></progress>
        </div>

        <div class="progress">
          <div class="label">Receive progress:</div>
          <progress id="receiveProgress" max="0" value="0"></progress>
        </div>

        <div id="bitrate"></div>
        <a id="download"></a>
        <span id="status"></span>
      </section>
    </div> -->

    <!-- Adding whiteboard functionality -->
    <div style="width: 600px; height: 550px" id="wt-container"></div>

    <script src="https://www.whiteboard.team/dist/api.js"></script>
    <script type="text/javascript">
      var wt = new api.WhiteboardTeam("#wt-container", {
        clientId: "01c4a59601ba9cf5e0e64f4c6014d47c",
        boardCode: "bcfd56d4-98e7-482c-93a0-faf8f62f0632",
        participant: {
          role: "editor",
        },
      });
      wt.fitToScreen();
    </script>

    <!-- Adding calendar -->
    <div class="hero">
      <div id="calendar"></div>
    </div>
    <!-- end -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
  <script src="/js/evo-calendar.min.js"></script>
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>

    <!-- include adapter for srcObject shim -->
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>

    <script src="/js/close.js"></script>
    <script src="/js/calendar.js"></script>
    <script src="/js/fullScreen.js"></script>
  </body>
</html>
